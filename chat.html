<template x-if="accessToken">
    <div class="flex flex-col h-full px-4 py-2">
        <!-- User ID та Room ID -->
        <div
            class="mb-4 p-3 bg-gray-100 rounded border border-gray-300 text-sm break-words flex justify-between items-center">
            <div>
                <span class="font-bold">Your Matrix ID:</span>
                <span x-text="userId ? userId : 'Loading...'"></span>
            </div>
            <div class="text-right">
                <span class="font-bold">Room ID:</span>
                <span x-text="roomId || 'Not selected'"
                    class="ml-1 bg-white px-2 py-1 rounded cursor-pointer border border-gray-300 hover:bg-gray-200 transition"
                    @click="$clipboard(roomId)">
                </span>
                <span class="text-xs text-gray-500 ml-1">(Click to copy)</span>
            </div>
        </div>

        <!-- Повідомлення -->
        <div id="messages"
            class="flex-1 overflow-y-auto mb-4 p-3 bg-white rounded border border-gray-300 h-[500px] shadow-inner">
            <template x-if="messages.length === 0">
                <p class="text-gray-500 text-center">No messages yet. Start the conversation!</p>
            </template>
            <template x-for="msg in messages" :key="msg.id">
                <div class="mb-2">
                    <strong
                        x-text="msg.sender === userId ? 'You' : msg.sender.split(':')[0].substring(1) + ':'"></strong>
                    <span x-text="msg.body" class="ml-2"></span>
                </div>
            </template>
        </div>

        <!-- Ввід повідомлення -->
        <div class="mb-4">
            <textarea x-model="newMessage" placeholder="Type your message here..."
                class="message-input border p-2 w-full mb-2 rounded resize-y focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            <button @click="sendMessage()"
                class="bg-green-500 text-white p-2 w-full rounded hover:bg-green-600 transition">
                Send
            </button>
        </div>
    </div>
</template>