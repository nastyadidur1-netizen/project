<template x-if="accessToken">
    <div class="sidebar p-4 bg-gray-50 border-r border-gray-200 overflow-y-auto h-full">
        <!-- Заголовок -->
        <h2 class="text-xl font-bold mb-4">Rooms</h2>

        <!-- Список кімнат -->
        <div class="room-list space-y-1">
            <ul class="sidebar-list">
                <template x-for="room in rooms" :key="room.roomId">
                    <li class="flex items-center justify-between cursor-pointer rounded px-3 py-2 hover:bg-blue-100"
                        :class="{ 'bg-blue-200 font-semibold': room.roomId === roomId }">
                        <!-- Перемикання кімнати -->
                        <span class="truncate flex-1" @click="switchRoom(room.roomId)"
                            x-text="room.name || room.roomId"></span>

                        <!-- Кнопка "Видалити кімнату" -->
                        <button @click.stop="leaveRoom(room.roomId)"
                            class="ml-2 text-red-500 hover:text-red-700 text-sm font-medium" title="Вийти з кімнати">
                            ×
                        </button>
                    </li>
                </template>
            </ul>
        </div>

        <!-- Створення нової кімнати -->
        <div class="mt-6">
            <input x-model="newRoomName" placeholder="New room name" class="border p-2 w-full mb-2 rounded" />
            <button @click="createRoom()"
                class="bg-indigo-500 text-white p-2 w-full rounded hover:bg-indigo-600 transition">
                Create Room
            </button>

            <!-- Показ ID новоствореної кімнати -->
            <p x-show="newRoomId" class="text-sm text-gray-600 mt-2">
                Room ID: <span x-text="newRoomId"></span>
            </p>
        </div>
    </div>
</template>